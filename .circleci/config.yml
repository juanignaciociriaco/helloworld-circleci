version: 2.1
jobs:
  checkout_and_build:
    docker:
      - image: circleci/openjdk:8-jdk-stretch
    steps:
      - checkout
      - run:
          name: The First Step
          command: |
            echo 'Hello World!'
            echo 'This is the delivery pipeline'
      - run:
          name: The Second Step
          command: |
            echo 'Hello World 2!'
            echo 'This is the delivery pipeline'
## This is the second job definition
  promote_to_master:
    docker:
      - image: circleci/openjdk:8-jdk-stretch
    steps:
      - checkout
      - run:
          name: The First Step
          command: |
            echo 'Hello World!'
            echo 'This is the delivery pipeline'
workflows:
  version: 2
  build_release:
    jobs:
      - checkout_and_build
        promote_to_environments:
          jobs:
            - promote_to_master:
              requires:
                - checkout_and_build
